

# Introduction #

When complete, this will be a description of the analyses available in Biodiverse.  Much of the informative content is currently in the SampleSession page, but is likely to be moved here in a future round of editing.

# Clustering #

Agglomerative clustering of the groups based on their labels, or based on some function of their labels such as the values of a linked matrix or tree.  See [SampleSession#Running\_a\_Cluster\_Analysis](SampleSession#Running_a_Cluster_Analysis.md)

# Spatial analyses #

These are moving window analyses.  See [SampleSession#Running\_a\_spatial\_(moving\_window)\_analysis](SampleSession#Running_a_spatial_(moving_window)_analysis.md)

# Matrix visualisations #

_Available from version 0.16._

Need to add text here.

# Region Grower #

_Available from version 0.16._

Need to add text here.

# Randomisations #

See [SampleSession#Running\_a\_randomisation](SampleSession#Running_a_randomisation.md).

<a href='Hidden comment: 
NEED TO EXPLAIN HOW THEY WORK - OVERVIEW
'></a>


## Where do the randomisation results go and what do they mean? ##

The randomisations do not themselves store any results.  All results are added as additional lists in the spatial and cluster outputs.  They can be accessed under the chooser which defaults to SPATIAL\_RESULTS for a spatial analysis and Cluster for a cluster analysis.

Assume in this case that _Rand1_ was used as the name of the randomisation (despite knowing full well that it is a poor choice of name and that in three weeks time we will have no idea what it means or was for).

  1. The randomisation results for a spatial analysis go into a list called _Rand1_ on that output. The naming scheme is explained below.
  1. Cluster analyses (trees) have at least three lists attached to each node, with a fourth if a spatial analysis was conducted on each node.
    1. _Rand1_ contains summary statistics of the most similar nodes between the original and randomised trees (e.g. mean, median, SD, quartiles, count of comparisons, how many were identical), with the similarity assessed using a Sorenson dissimilarity index (zero is identical, 0.5 means half of the terminal elements across both nodes were shared, with double counting of shared nodes).
    1. _Rand1\_DATA_ is the full set of Sorenson comparison results in case you want to extract them for other nefarious purposes (e.g. how many times did the randomisation produce a node which had 80% or more terminal elements in common?).
    1. _Rand1\_ID\_LDIFFS_ contains the total lengths (from the tip of the tree) of those nodes that contained an identical set of terminal elements. If all (or most) are longer then the original tree at least has a shorter total length, even though it resulted in the same set of elements being grouped together.  (The name is an abbreviation of IDentical node Length DIFFerences. This is a confusing abbreviation and name, so any suggestions are welcome.)
    1. _Rand1\_SPATIAL_ contains the comparison values of the spatial outputs for the most similar nodes. The naming scheme is explained below.

What do the spatial comparison lists mean? The indices shown are those used in the comparisons, prefixed by a letter with an underscore.

  * C`_*` (e.g. C\_ENDC\_CWE, C\_NUM\_MAX) is the number of times the original value was higher than the comparison.
  * Q`_*` (e.g. Q\_ENDC\_CWE, Q\_NUM\_MAX) is the number of comparisons (q = quantum). We could use the number of iterations directly, however there may be cases where undefined values result for some indices. We cannot compare undefined with a number, and we also cannot be sure that the number of times undef results is the same for all indices.
  * P`_*` (e.g. P\_ENDC\_CWE, P\_NUM\_MAX) is the fractional ranking of the original value against those generated by the set of randomisations, calculated as C`_*` / Q`_*`. Multiply by 100 to get a percentile. The P`_*` score is converted into a p-score in the normal way, i.e. if P`_*` = 0.99 then the original measure is higher than the randomised versions 99 times out of every hundred. If one considers higher scores to be more significant (a one tailed test) then this is the same as a p score of 0.01. Obviously one changes the interpretation appropriately if it is a two tailed system, e.g. the mean of numeric labels (NUM\_MEAN) can be higher or lower than the set of randomisation results. So long as it is in one of the tails of the distribution then the original result is significantly more extreme than that generated by the randomisation (e.g. P\_NUM\_MEAN < 0.025 or P\_NUM\_MEAN > 0.975 for an alpha of 0.05).
  * T`_*` (e.g. T\_ENDC\_CWE, T\_NUM\_MAX) is the number of ties, being the count of the number of times the original value was the same as the randomised value.  If there were no ties then this index is not listed.  (Note - ties are only counted from version 0.15, see [issue #146](https://code.google.com/p/biodiverse/issues/detail?id=#146)).

**Note:**  Users operating with a system that uses the comma character as the decimal place marker (radix) need to take care when running a randomisation, as comparisons will only be based on the part of the number before the comma.  If this is ignored then things will go horribly wrong as the comparison of two numbers such as "0,6 > 0,5" (result=true) will be treated as "0 > 0" (result=false).  See [SampleSession#A\_word\_of\_warning](SampleSession#A_word_of_warning.md) and [issue #81](https://code.google.com/p/biodiverse/issues/detail?id=#81).  This problem should be fixed in version 0.14.

**Note 2:**  From version 0.14, the randomisations will generate lists for all hash lists resulting from the calculations.  To enable users to keep track of the results across multiple lists, the results are now named using the randomisation name, followed by '>>', followed by the original list name. For example, for a randomisation caled 'Rand1', one could have resulting lists called `Rand1>>SPATIAL_RESULTS` and `Rand1>>ENDC_WTLIST`. The code is not backwards compatible, so previously run randomisations cannot be extended cleanly using this method. This is because the SPATIAL\_RESULTS comparisons will be divided across two lists in an output, e.g. `Rand1` and `Rand1>>SPATIAL_RESULTS`. Re-running the randomisation from scratch is recommended. Alternately, one can manually sum the `C_` and `Q_` values and from them calcuate the updated `P_` values.  _(These notes will be merged into the text above when version 0.14 is released.)_

<a href='Hidden comment: 
Add comment about the fact that some results will be missing since comparisons might not be generated by the randomisation given the number of iterations.
'></a>